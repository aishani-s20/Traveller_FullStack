<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Airbnb-style Map (MapLibre)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://unpkg.com/maplibre-gl@3.6.1/dist/maplibre-gl.css" rel="stylesheet" />
  <script src="https://unpkg.com/maplibre-gl@3.6.1/dist/maplibre-gl.js"></script>
  <style>
    body, html { margin:0; padding:0; height:100%; }
    #map { height:100%; width:100%; }
    .marker {
      background-color: white;
      border: 2px solid #FF385C; /* Airbnb pink */
      border-radius: 8px;
      color: #FF385C;
      font-weight: bold;
      font-size: 14px;
      padding: 3px 6px;
      text-align: center;
      cursor: pointer;
      box-shadow: 0 1px 4px rgba(0,0,0,0.3);
      transition: transform 0.2s;
    }
    .marker:hover {
      transform: scale(1.1);
    }
    .mapboxgl-popup-content {
      border-radius: 12px;
      font-family: sans-serif;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script>
    // ✅ Sample listing data (replace with your data)
    const listings = [
      {
        title: "Cozy Studio in Delhi",
        price: "₹1800/night",
        coordinates: [77.2090, 28.6139]
      },
      {
        title: "Beach View Apartment, Goa",
        price: "₹3200/night",
        coordinates: [73.8567, 15.2993]
      },
      {
        title: "Mountain Cabin, Manali",
        price: "₹2500/night",
        coordinates: [77.1892, 32.2432]
      }
    ];

    // ✅ Create map
    const map = new maplibregl.Map({
      container: "map",
      style: {
        "version": 8,
        "sources": {
          "osm": {
            "type": "raster",
            "tiles": [
              "https://a.tile.openstreetmap.org/{z}/{x}/{y}.png",
              "https://b.tile.openstreetmap.org/{z}/{x}/{y}.png",
              "https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"
            ],
            "tileSize": 256,
            "attribution": "© OpenStreetMap contributors"
          }
        },
        "layers": [
          { "id": "osm", "type": "raster", "source": "osm" }
        ]
      },
      center: [77.5, 22.9], // Center of India
      zoom: 4.5
    });

    // ✅ Add markers for each listing
    listings.forEach(listing => {
      const el = document.createElement("div");
      el.className = "marker";
      el.textContent = listing.price;

      // Add popup
      const popup = new maplibregl.Popup({ offset: 25 }).setHTML(`
        <h4>${listing.title}</h4>
        <p>${listing.price}</p>
      `);

      new maplibregl.Marker(el)
        .setLngLat(listing.coordinates)
        .setPopup(popup)
        .addTo(map);
    });

    // Add navigation controls
    map.addControl(new maplibregl.NavigationControl());
  </script>
</body>
</html>
